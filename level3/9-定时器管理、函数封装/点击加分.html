<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <title>点击加分</title>
    <style>
		.box{
			position: absolute;
			top: 50%;
			left: 50%;
			margin-left: -250px;
			margin-top: -25px;
			width: 500px;
			height: 50px;
			border: 1px solid #000;
		}
		.box .bg{
			position: absolute;
			width: 0;
			height: 50px;
			background-color: red;
			opacity: 0;
			filter: alpha(opacity = 0);
		}
		.box ul{
			padding: 0;
			margin: 0;
		}
		.box li{
			position: absolute;
			z-index: 1;
			left: 0;
			top: 0;
			width: 50px;
			height: 50px;
			line-height: 50px;
			list-style: none;
			text-align: center;
		}
    </style>
    <script>
	    function getStyle(obj, attr){
	    	return obj.currentStyle ? obj.currentStyle[attr] : getComputedStyle(obj, false)[attr];
	    }

    	function doMove(obj, attr, dir, target, endFn) {     

            if(attr == 'opacity'){
                dir = Math.round( getStyle(obj, attr) * 100 ) < target ? dir : -dir;
            }else{
                dir = parseInt( getStyle(obj, attr) ) < target ? dir : -dir;
            }        

            clearInterval(obj.timer);
            obj.timer = setInterval(function() {
                var speed = 0;
                if(attr == 'opacity'){
                    speed = Math.round( getStyle(obj, attr) * 100 ) + dir;
                }else{
                    speed = parseInt( getStyle(obj, attr) ) + dir;
                }

                if(speed > target && dir > 0 || speed < target && dir < 0){
                    speed = target;
                }

                if(attr == 'opacity'){
                    obj.style.opacity = speed / 100;
                    obj.style.filter = 'alpha(opacity = '+ speed +' )';
                }else{
                    obj.style[attr] = speed + 'px';
                }

                if(speed == target){
                    clearInterval(obj.timer);
                    if(typeof endFn == 'function'){
                        endFn();
                    }
                }
                
            }, 30);
            
        }

        function doMove2(obj, attr, dir, target, endFn) {    
        	if(attr == 'opacity'){
                dir = Math.round( getStyle(obj, attr) * 100 ) < target ? dir : -dir;
            }else{
                dir = parseInt( getStyle(obj, attr) ) < target ? dir : -dir;
            }        

            clearInterval(obj.timer);
            obj.timer = setInterval(function() {
                var speed = 0;
                if(attr == 'opacity'){
                    speed = Math.round( getStyle(obj, attr) * 100 ) + dir;
                }else{
                    speed = parseInt( getStyle(obj, attr) ) + dir;
                }

                if(speed > target && dir > 0 || speed < target && dir < 0){
                    speed = target;
                }

                if(attr == 'opacity'){
                    obj.style.opacity = speed / 100;
                    obj.style.filter = 'alpha(opacity = '+ speed +' )';
                }else{
                    obj.style[attr] = speed + 'px';
                }

                if(speed == target){
                    clearInterval(obj.timer);
                    if(typeof endFn == 'function'){
                        endFn();
                    }
                }
                
            }, 30);
        }

    	window.onload = function() {
    		var oBox = document.getElementById('box'),
    			oBg = oBox.getElementsByTagName('div')[0],
    			aLi = oBox.getElementsByTagName('li'),
    			timer = null,
    			num = 0,
    			onOff = true;

    		for(var i=0;i<aLi.length;i++){
    			aLi[i].style.left = i * 50 + 'px';
    		}

    		oBox.onclick = function() {
    			if(onOff){
    				onOff = false;

    				doMove(oBg, 'width', 15, 200);
	    			doMove2(oBg, 'opacity', 10, 100);
	    			
	    		// 	timer = setInterval(function() {
	    		// 		doMove(aLi[num], 'top', 10, -100);
	    		// 		num++;
	    		// 		if(num == aLi.length){
							// num = 0;
							// clearInterval(timer);
							// onOff = true;
	    		// 		}	
	    		// 	}, 100);	
    			}
    				
    		};
    	};
    </script>
</head>
<body>

<div id="box" class="box">
	<div class="bg"></div>
	<ul>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
		<li>+1</li>
	</ul>
</div>

</body>
</html>