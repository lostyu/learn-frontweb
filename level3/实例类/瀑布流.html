<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <title>瀑布流</title>
    <style>
    	*{
    		margin: 0;
    		padding: 0;
    		list-style: none;
    	}
		.box{
			width: 630px;
			margin: 20px auto;
		}
		.box ul{
			float: left;
			width: 200px;
			margin: 5px;
		}
		.box li{}
		.box li img{
			width: 200px;			
		}
    </style>
	<script src="../../global/jquery.js"></script>
    <script>
    	window.onload = function() {
    		var aUl = document.getElementsByTagName('ul');
    		var page = 0;

    		window.onscroll = function() {
    			var domH = document.documentElement.clientHeight;
    			var sH = document.documentElement.scrollTop || document.body.scrollTop;
    			
    			for(var i=0;i<aUl.length;i++){
    				var oLi = aUl[i].children[aUl[i].children.length - 1];


    				if(getPosTop(oLi) < domH + sH){
    					page++;
    					if(page <= 10){
    						for(var i=0;i<aUl.length;i++){
								var oLi = document.createElement('li');
								oLi.innerHTML = '<img src="img/p'+(i+1)+'.jpg" alt=""><p>123123444</p>';
								aUl[i].appendChild(oLi);
							}
    					}
    				}
    			}
    		};

    		function getPosTop(obj) {
    			var top = 0;
    			while(obj){
    				top += obj.offsetTop;
    				obj = obj.offsetParent;
    			}
    			return top;
    		}
    	};
    </script>
</head>
<body>

<div class="box">
	<ul>
		<li><img src="img/p1.jpg" alt=""><p>123123444</p></li>
		<li><img src="img/p2.jpg" alt=""><p>123123444</p></li>
		<li><img src="img/p3.jpg" alt=""><p>123123444</p></li>
	</ul>
	<ul>
		<li><img src="img/p4.png" alt=""><p>123123444</p></li>
		<li><img src="img/p1.jpg" alt=""><p>123123444</p></li>
		<li><img src="img/p2.jpg" alt=""><p>123123444</p></li>
	</ul>
	<ul>
		<li><img src="img/p3.jpg" alt=""><p>123123444</p></li>
		<li><img src="img/p4.png" alt=""><p>123123444</p></li>
		<li><img src="img/p1.jpg" alt=""><p>123123444</p></li>
	</ul>
</div>

</body>
</html>